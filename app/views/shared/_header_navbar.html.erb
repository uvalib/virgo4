<%# app/views/shared/_header_navbar.html.erb -%>
<%-
  # Page header navbar.

  logo ||= link_to(h(application_name), root_path)
  lens ||= current_lens_key
  lens &&=
    if request.path.start_with?("/#{lens}")
      label = h(lens.to_s.capitalize)
      path  = send("search_#{lens}_path")
      ' &ndash; '.html_safe << link_to(label, path, class: 'navbar-lens')
    end

  # The caller may provide additional CSS classes via the :css_class or
  # :navbar_css options.
  css_class =
    css_classes(css_class ||= nil) { |classes|
      classes << 'navbar navbar-inverse navbar-static-top'
    }
  navbar_css =
    css_classes(navbar_css ||= nil) { |classes|
      classes << 'navbar navbar-default navbar-static-top'
    }
-%>

<div id="header-navbar" class="<%= css_class -%>" role="navigation">
  <div class="<%= container_classes %>">
    <div class="navbar-header">
      <button type="button"
              class="navbar-toggle btn collapsed"
              data-toggle="collapse"
              data-target="#user-util-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand"><%= logo -%><%= lens -%></span>
    </div>

    <div class="collapse navbar-collapse" id="user-util-collapse">
      <%= render '/user_util_links' %>
    </div>
  </div>
</div>

<div id="search-navbar" class="<%= navbar_css -%>" role="navigation">
  <div class="<%= container_classes -%>">
    <%= render_search_bar %>
  </div>
</div>
